### Mon, Oct 16th, 2023

**maxleske** <span style="color: grey; font-size: 90%;">18:30:15 UTC</span>

<span style="font-size: 90%;">:wave:</span>

**airween** <span style="color: grey; font-size: 90%;">18:31:01 UTC</span>

<span style="font-size: 90%;">hi there!</span>

**dune73** <span style="color: grey; font-size: 90%;">18:31:19 UTC</span>

<span style="font-size: 90%;">Hello, hello</span>

**franbuehler** <span style="color: grey; font-size: 90%;">18:31:40 UTC</span>

<span style="font-size: 90%;">Hi</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:31:48 UTC</span>

<span style="font-size: 90%;">Hi!</span>

**emphazer** <span style="color: grey; font-size: 90%;">18:32:28 UTC</span>

<span style="font-size: 90%;">Hello</span>

**dune73** <span style="color: grey; font-size: 90%;">18:32:34 UTC</span>

<span style="font-size: 90%;">Good to see you all. And thank you for all the work with the Changelog. I contributed but little, but I love how this evolved.</span>

**dune73** <span style="color: grey; font-size: 90%;">18:32:48 UTC</span>

<span style="font-size: 90%;">It was a major painpoint and now it's really doable.</span>

**dune73** <span style="color: grey; font-size: 90%;">18:34:11 UTC</span>

<span style="font-size: 90%;">How did it go for you? Very difficult to write the messages, or just look at the PR, follow the guidelines and easy?</span>

**maxleske** <span style="color: grey; font-size: 90%;">18:34:40 UTC</span>

<span style="font-size: 90%;">Mostly easy. Categorization was the hardest part</span>

**jit** <span style="color: grey; font-size: 90%;">18:34:42 UTC</span>

<span style="font-size: 90%;">Hi everyone</span>

**airween** <span style="color: grey; font-size: 90%;">18:34:44 UTC</span>

<span style="font-size: 90%;">I jumped over the difficulties, so the remain issues was easy :stuck_out_tongue:</span>

**dune73** <span style="color: grey; font-size: 90%;">18:35:25 UTC</span>

<span style="font-size: 90%;">Yes, I think the categorization is not very clear. We need to improve that going forward.</span>

**franbuehler** <span style="color: grey; font-size: 90%;">18:36:10 UTC</span>

<span style="font-size: 90%;">For me some were difficult because the rule ids changed... but it was doable</span>

**dune73** <span style="color: grey; font-size: 90%;">18:36:27 UTC</span>

<span style="font-size: 90%;">That's a hassle in those special cases, yes.</span>

**dune73** <span style="color: grey; font-size: 90%;">18:36:36 UTC</span>

<span style="font-size: 90%;">We're at 39 now.</span>

**dune73** <span style="color: grey; font-size: 90%;">18:37:07 UTC</span>

<span style="font-size: 90%;">Did not look at the remaining ones. Are these all the tough nuts to crack, or something we can get done tomorrow or so?</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:37:27 UTC</span>

<span style="font-size: 90%;">I skipped at least a couple of tricky cases this afternoon.</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:38:01 UTC</span>

<span style="font-size: 90%;">So a few tough nuts remain, for sure</span>

**dune73** <span style="color: grey; font-size: 90%;">18:39:24 UTC</span>

<span style="font-size: 90%;">How do we continue then?</span>

**dune73** <span style="color: grey; font-size: 90%;">18:39:56 UTC</span>

<span style="font-size: 90%;">As stated before: I would be very happy to consolidate once all the items are checked (and I think a single person should do that to get some consistency).</span>

**dune73** <span style="color: grey; font-size: 90%;">18:40:29 UTC</span>

<span style="font-size: 90%;">Can we divide up the remaining ones? Who has time at hand?
(And who will do the RC afterwards?)</span>

**franbuehler** <span style="color: grey; font-size: 90%;">18:41:44 UTC</span>

<span style="font-size: 90%;">I can do some more tomorrow.</span>

**maxleske** <span style="color: grey; font-size: 90%;">18:42:08 UTC</span>

<span style="font-size: 90%;">I probably have some time in the evenings but I can't promise anything</span>

**airween** <span style="color: grey; font-size: 90%;">18:42:36 UTC</span>

<span style="font-size: 90%;">a side question (re: "And who will do the RC afterwards?"): is there any workflow for making a release? I found this wiki page, would be this enough?
[https://github.com/coreruleset/coreruleset/wiki/Release-Procedure](https://github.com/coreruleset/coreruleset/wiki/Release-Procedure)</span>

**dune73** <span style="color: grey; font-size: 90%;">18:43:09 UTC</span>

<span style="font-size: 90%;">When we last discussed this it was seen as good enough.
_@xanadu_ Please confirm.</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:44:02 UTC</span>

<span style="font-size: 90%;">When we did v3.3.5, those instructions were sufficient for _@fzipitria_ and I to muddle through. We improved parts that were unclear during the process, so the instructions should now be better (and clearer) than before.</span>

**dune73** <span style="color: grey; font-size: 90%;">18:44:27 UTC</span>

<span style="font-size: 90%;">And we have the signing stuff now ready, don't we?</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:44:37 UTC</span>

<span style="font-size: 90%;">I think someone has the key, yes</span>

**airween** <span style="color: grey; font-size: 90%;">18:45:01 UTC</span>

<span style="font-size: 90%;">if someone can help me, I can prepare the RC. Or if someone wants to do that, I would like to help/participate</span>

**airween** <span style="color: grey; font-size: 90%;">18:45:34 UTC</span>

<span style="font-size: 90%;">_@xanadu_ or _@fzipitria_ - they did this already</span>

**dune73** <span style="color: grey; font-size: 90%;">18:45:55 UTC</span>

<span style="font-size: 90%;">That would be really useful, _@airween_. Thank you for volunteering.</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:46:03 UTC</span>

<span style="font-size: 90%;">I can certainly help do the comms/announcements/blog post again. I haven't personally done any of the branches or signing or that part, yet.</span>

**dune73** <span style="color: grey; font-size: 90%;">18:46:17 UTC</span>

<span style="font-size: 90%;">That was fzipi, was not it?</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:46:26 UTC</span>

<span style="font-size: 90%;">Yes.</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:46:34 UTC</span>

<span style="font-size: 90%;">And he did a great job of it, too.</span>

**dune73** <span style="color: grey; font-size: 90%;">18:48:07 UTC</span>

<span style="font-size: 90%;">So I guess there is enough time to plan this during the week and we get going as soon as the Changelog is done. Or any other show-stoppers that need to be anticipated / moved out of the way (Apparently a release message etc., etc. but that's not overly complicated).</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:48:51 UTC</span>

<span style="font-size: 90%;">6 open issues marked as "v4"</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:49:09 UTC</span>

<span style="font-size: 90%;">Are any of those urgent and "must haves" for the RC?</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:49:14 UTC</span>

<span style="font-size: 90%;">([https://github.com/coreruleset/coreruleset/issues?q=is%3Aissue+is%3Aopen+label%3Av4](https://github.com/coreruleset/coreruleset/issues?q=is%3Aissue+is%3Aopen+label%3Av4))</span>

**maxleske** <span style="color: grey; font-size: 90%;">18:49:32 UTC</span>

<span style="font-size: 90%;">That was my opinion :slightly_smiling_face:</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:49:34 UTC</span>

<span style="font-size: 90%;">And two PRs also marked "v4"
[https://github.com/coreruleset/coreruleset/pulls?q=is%3Apr+is%3Aopen+label%3Av4](https://github.com/coreruleset/coreruleset/pulls?q=is%3Apr+is%3Aopen+label%3Av4)</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:49:52 UTC</span>

<span style="font-size: 90%;">Ah hah! So was your understanding/opinion that they were must-haves?</span>

**dune73** <span style="color: grey; font-size: 90%;">18:50:14 UTC</span>

<span style="font-size: 90%;">Another 1-2 were merged since we started the changelog process. I'll add those when I consolidate.</span>

**maxleske** <span style="color: grey; font-size: 90%;">18:51:12 UTC</span>

<span style="font-size: 90%;">The ones I tagged I felt would make sense to include. "must-have" is a bit strong</span>

**dune73** <span style="color: grey; font-size: 90%;">18:51:16 UTC</span>

<span style="font-size: 90%;">Issues / PRs to be included: For the other releases CRS did since we took over, inclusion of PRs and features was a the discretion of the release manager. If we decide _@airween_ is the release manager he has the say on this question.</span>

**dune73** <span style="color: grey; font-size: 90%;">18:52:25 UTC</span>

<span style="font-size: 90%;">Personally, I think these PRs / issues can be added or they are not. It's no big deal. If ready, I'm open to merge. And if we think they should be merged for the final release, then maybe that's also OK.¨</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:53:18 UTC</span>

<span style="font-size: 90%;">The two open PRs: both are approved, one has been questioned, the other has merge conflicts</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:53:25 UTC</span>

<span style="font-size: 90%;">Not sure how severe the merge conflicts are.</span>

**dune73** <span style="color: grey; font-size: 90%;">18:54:14 UTC</span>

<span style="font-size: 90%;">If _@theMiddle_ or somebody else wants them merged, it's their job to get them into shape. I think the release can do without them.</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:54:28 UTC</span>

<span style="font-size: 90%;">Should we discuss [https://github.com/coreruleset/coreruleset/pull/3302](https://github.com/coreruleset/coreruleset/pull/3302)?</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:54:41 UTC</span>

<span style="font-size: 90%;">As far as I can tell it's been awaiting a discussion for a while</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:55:00 UTC</span>

<span style="font-size: 90%;">Or it can wait if we don't have time this evening.</span>

**dune73** <span style="color: grey; font-size: 90%;">18:56:27 UTC</span>

<span style="font-size: 90%;">Happy to discuss it here if you think it necessary.</span>

**dune73** <span style="color: grey; font-size: 90%;">18:56:45 UTC</span>

<span style="font-size: 90%;">It's certainly a problem if CRSv4 would come out with this "bug".</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:57:33 UTC</span>

<span style="font-size: 90%;">The questions are:
</span>

**dune73** <span style="color: grey; font-size: 90%;">18:57:55 UTC</span>

<span style="font-size: 90%;">Open questions in the PR: I do not have the overview of tag usage outside of the rule files they are associated with.</span>

**dune73** <span style="color: grey; font-size: 90%;">18:58:41 UTC</span>

<span style="font-size: 90%;">But I am confident we would question a PR that added a tag to a different file.</span>

**xanadu** <span style="color: grey; font-size: 90%;">18:58:47 UTC</span>

<span style="font-size: 90%;">(For context, the overall issue is that we cannot do
ctl:ruleRemoveTargetById=941100-941999;REQUEST_FILENAME
because ModSec v3 does not support use of ranges there)</span>

**emphazer** <span style="color: grey; font-size: 90%;">18:58:54 UTC</span>

<span style="font-size: 90%;">A problem i see here is that the letters are limited to use too many tags</span>

**dune73** <span style="color: grey; font-size: 90%;">18:59:31 UTC</span>

<span style="font-size: 90%;">I think the tag solution is adequate here. And the number of tags should be kept low (we already consolidated for 3.3 or so)</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:00:53 UTC</span>

<span style="font-size: 90%;">My thought was that we cannot rely on using a general tag like attack-xss , if only because we cannot control if a user will use such a tag elsewhere e.g. for reporting purposes</span>

↳ **airween** <span style="color: grey; font-size: 90%;">19:02:06 UTC</span>

<span style="font-size: 90%;">should we use (for eg.) OWASP_CRS/xss-perf-disable?</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:01:05 UTC</span>

<span style="font-size: 90%;">Which was the reasoning for creating a new tag for this specific exclusion.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:01:39 UTC</span>

<span style="font-size: 90%;">Yes, I see this. But I think your scenario is quite far-fetched.</span>

**airween** <span style="color: grey; font-size: 90%;">19:02:06 UTC</span>

<span style="font-size: 90%;">should we use (for eg.) OWASP_CRS/xss-perf-disable?</span>

↳ **airween** <span style="color: grey; font-size: 90%;">19:02:06 UTC</span>

<span style="font-size: 90%;">should we use (for eg.) OWASP_CRS/xss-perf-disable?</span>

**dune73** <span style="color: grey; font-size: 90%;">19:02:12 UTC</span>

<span style="font-size: 90%;">I would rather not consider it. But maybe my perspective is too limited. You thought more about this than I.</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:02:57 UTC</span>

<span style="font-size: 90%;">To be fair, in a custom rule you can also just remove the tag, unless it's being used for some other purpose as well (you mentioned reporting)</span>

**dune73** <span style="color: grey; font-size: 90%;">19:03:06 UTC</span>

<span style="font-size: 90%;">We have the plan to use similar mechanisms to improve performance for 4.1. Whatever we decide here may have an impact going forward.</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:03:07 UTC</span>

<span style="font-size: 90%;">The alternative is a.) we document "users must not reuse CRS tags or unexpected side effects may occur" and b.) we must make sure not to use attack-xss outside of this file, or we risk disabling unintended rules of our own</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:03:26 UTC</span>

<span style="font-size: 90%;">Which is also an acceptable solution, just a different one.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:03:56 UTC</span>

<span style="font-size: 90%;">I would not mind linting to enforce limited tag use in this direction.</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:05:44 UTC</span>

<span style="font-size: 90%;">Either direction would work, we just need to decide a path forward and implement it.</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:05:58 UTC</span>

<span style="font-size: 90%;">IMO, if a tag should be restricted to a given file (effectively range) then the tag should include that range in its name</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:06:15 UTC</span>

<span style="font-size: 90%;">i.e., attack-xss-941, for example</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:06:19 UTC</span>

<span style="font-size: 90%;">Self-documenting tags</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:06:27 UTC</span>

<span style="font-size: 90%;">That's an interesting idea</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:06:50 UTC</span>

<span style="font-size: 90%;">Hmm, but would that upset users' dashboards?</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:06:54 UTC</span>

<span style="font-size: 90%;">That would also make linting much easier (no need for handcrafting rules)</span>

**theMiddle** <span style="color: grey; font-size: 90%;">19:07:18 UTC</span>

<span style="font-size: 90%;">If we can avoid the attack prefix, I agree</span>

**theMiddle** <span style="color: grey; font-size: 90%;">19:07:47 UTC</span>

<span style="font-size: 90%;">(reading from the beginning, sry)</span>

**dune73** <span style="color: grey; font-size: 90%;">19:09:04 UTC</span>

<span style="font-size: 90%;">The numbers are very ugly in tags.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:09:04 UTC</span>

<span style="font-size: 90%;">People doing reports might not be familiar with CRS rule IDs and the concept behind it. I would rather not do that.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:10:32 UTC</span>

<span style="font-size: 90%;">attack-rce
REQUEST-932-APPLICATION-ATTACK-RCE.conf:37
REQUEST-934-APPLICATION-ATTACK-GENERIC.conf:7
REQUEST-944-APPLICATION-ATTACK-JAVA.conf:13
RESPONSE-955-WEB-SHELLS.conf:26</span>

**dune73** <span style="color: grey; font-size: 90%;">19:10:43 UTC</span>

<span style="font-size: 90%;">attack-protocol
REQUEST-920-PROTOCOL-ENFORCEMENT.conf:58
REQUEST-921-PROTOCOL-ATTACK.conf:16
REQUEST-922-MULTIPART-ATTACK.conf:1</span>

**dune73** <span style="color: grey; font-size: 90%;">19:11:03 UTC</span>

<span style="font-size: 90%;">attack-xss
REQUEST-941-APPLICATION-ATTACK-XSS.conf:33</span>

**dune73** <span style="color: grey; font-size: 90%;">19:11:19 UTC</span>

<span style="font-size: 90%;">So we are quite consistent with out usage of the attack tags, but not everywhere.</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:11:26 UTC</span>

<span style="font-size: 90%;">Hmm.</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:11:53 UTC</span>

<span style="font-size: 90%;">What did _@emphazer_ mean with the character limit?</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:11:58 UTC</span>

<span style="font-size: 90%;">So, if an XSS rule needed to appear in another file, we would have to invent a new tag (if we decide to restrict it to this one file only)</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:12:19 UTC</span>

<span style="font-size: 90%;">Whereas e.g. RCE rules do appear outside of REQUEST-932-APPLICATION-ATTACK-RCE.conf</span>

**dune73** <span style="color: grey; font-size: 90%;">19:12:23 UTC</span>

<span style="font-size: 90%;">$ grep tag * | grep \'attack- | col2 | cut -d\' -f2 | sort | uniq | while read T; do echo; echo "$T"; grep -c $T *.conf; done | egrep -v ":0$"</span>

**dune73** <span style="color: grey; font-size: 90%;">19:13:04 UTC</span>

<span style="font-size: 90%;">So what do we do?</span>

**dune73** <span style="color: grey; font-size: 90%;">19:13:24 UTC</span>

<span style="font-size: 90%;">I think we can also postpone a decision until after RC2.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:13:42 UTC</span>

<span style="font-size: 90%;">It's obviously a bug and bugs can be fixed after an RC.</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:13:47 UTC</span>

<span style="font-size: 90%;">You've been talking about a performance issue. Does each tag incur a performance hit?</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:13:55 UTC</span>

<span style="font-size: 90%;">Or each tag: action?</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:14:12 UTC</span>

<span style="font-size: 90%;">Are tags not just baked into the data structure of each rule?</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:14:23 UTC</span>

<span style="font-size: 90%;">At configure time</span>

**dune73** <span style="color: grey; font-size: 90%;">19:14:43 UTC</span>

<span style="font-size: 90%;">Not sure. It's said to be true about carrying variables. Never really checked tags. But we have the framework to measure it now.</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:15:12 UTC</span>

<span style="font-size: 90%;"> We have the plan to use similar mechanisms to improve performance for 4.1. Whatever we decide here may have an impact going forward.</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:15:28 UTC</span>

<span style="font-size: 90%;">That was about excluding rules based on tags, yes? (_@dune73_)</span>

**dune73** <span style="color: grey; font-size: 90%;">19:16:13 UTC</span>

<span style="font-size: 90%;">Yes, that's one of the ideas, given ranges are off the table.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:16:30 UTC</span>

<span style="font-size: 90%;">(Or ModSec3 gets its acto together to run CRS 4.1)</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:16:44 UTC</span>

<span style="font-size: 90%;">Oh, but hang on: directives like SecRuleRemoveByTag are implicitly regex based, so adding a tag means 1 extra regex execution, right?</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:17:08 UTC</span>

<span style="font-size: 90%;">E.g. SecRuleRemoveByTag ABC would match tag:XYZ/ABC because it's a regex looking for "ABC", right?</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:17:20 UTC</span>

<span style="font-size: 90%;">So more tags = more regex execution</span>

↳ **airween** <span style="color: grey; font-size: 90%;">19:31:56 UTC</span>

<span style="font-size: 90%;">not in v3, it uses only a single string comparison:

[https://github.com/SpiderLabs/ModSecurity/blob/v3/master/src/rule_with_actions.cc#L447-L449](https://github.com/SpiderLabs/ModSecurity/blob/v3/master/src/rule_with_actions.cc#L447-L449)

but yes, it is in v2:

[https://github.com/SpiderLabs/ModSecurity/blob/v2/master/apache2/apache2_config.c#L2487](https://github.com/SpiderLabs/ModSecurity/blob/v2/master/apache2/apache2_config.c#L2487)</span>

↳ **xanadu** <span style="color: grey; font-size: 90%;">19:32:44 UTC</span>

<span style="font-size: 90%;">Good point. Then we must make sure to only use one whole string for our solution.</span>

↳ **xanadu** <span style="color: grey; font-size: 90%;">19:32:57 UTC</span>

<span style="font-size: 90%;">Whichever solution we implement.</span>

↳ **airween** <span style="color: grey; font-size: 90%;">19:34:50 UTC</span>

<span style="font-size: 90%;">in the list of topics (dev-retreat 2023: [https://github.com/coreruleset/coreruleset/wiki/Dev-Retreat-2023-Topics](https://github.com/coreruleset/coreruleset/wiki/Dev-Retreat-2023-Topics)), there is an item:

"Project: Bringing the ModSecurity v3 + Nginx tests up to the same level as the ModSecurity v2 + Apache tests, so we can enable them for the automated GitHub testing."

if we want to bring up v3 to level of v2, does it mean this behavior will the same?</span>

↳ **xanadu** <span style="color: grey; font-size: 90%;">19:35:51 UTC</span>

<span style="font-size: 90%;">So that v3 tests function and give meaningful results.</span>

↳ **xanadu** <span style="color: grey; font-size: 90%;">19:36:12 UTC</span>

<span style="font-size: 90%;">My understanding of v3 + Nginx is that it is simply not possible for it to behave the same as v2 + Apache</span>

↳ **xanadu** <span style="color: grey; font-size: 90%;">19:36:31 UTC</span>

<span style="font-size: 90%;">e.g. different reactions to different scenarios, Apache gives a 200 OK while Nginx gives a 400, etc.</span>

↳ **airween** <span style="color: grey; font-size: 90%;">19:37:32 UTC</span>

<span style="font-size: 90%;">yeah, that's true, but especially this behavior would be the same. Using regexes in exclusions helps to exclusions rule writers - but eats the CPU</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:17:44 UTC</span>

<span style="font-size: 90%;">Maybe this does need measuring.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:18:10 UTC</span>

<span style="font-size: 90%;">It will take a lot of measuring (-> performance measuring framework ready just in time)</span>

**dune73** <span style="color: grey; font-size: 90%;">19:18:39 UTC</span>

<span style="font-size: 90%;">I htink you are right about the regexes.</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:18:43 UTC</span>

<span style="font-size: 90%;">Is anyone au fait with that new framework?</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:19:02 UTC</span>

<span style="font-size: 90%;">A smart implementation would cache that information, because it's configuration bound, right? But I'm not expecting a smart implementation :wink:</span>

**dune73** <span style="color: grey; font-size: 90%;">19:20:45 UTC</span>

<span style="font-size: 90%;">I think we should explore it during the dev-retreat. Fzipi tries to organize a remote session with the author to close existing knowledge gaps.</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:21:03 UTC</span>

<span style="font-size: 90%;">Sounds cool</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:21:32 UTC</span>

<span style="font-size: 90%;">And let's maybe discuss the tag issue at the retreat again, then we can come up with a fix for post-RC2</span>

**dune73** <span style="color: grey; font-size: 90%;">19:22:12 UTC</span>

<span style="font-size: 90%;">Thanks guys.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:22:52 UTC</span>

<span style="font-size: 90%;">So back to the Changelog. We have _@franbuehler_ and _@maxleske_ volunteering to cover a few additional items till Wednesday or so.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:23:31 UTC</span>

<span style="font-size: 90%;">My plan would be to consolidate Wed night (Irish time), but I do not think this works if there are items that are not covered by then.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:24:21 UTC</span>

<span style="font-size: 90%;">_@jit_ / _@emphazer_ / _@theMiddle_ do you have time to write 5-10 items until Wednesday?</span>

**dune73** <span style="color: grey; font-size: 90%;">19:24:48 UTC</span>

<span style="font-size: 90%;">If you do, we bestow the rest on _@fzipitria_ :smiling_imp:</span>

**dune73** <span style="color: grey; font-size: 90%;">19:28:32 UTC</span>

<span style="font-size: 90%;">This looks promising. 39 items and 4-6 people working on it should get us across the line. Thank you. (And sorry for pushing so hard here)</span>

**dune73** <span style="color: grey; font-size: 90%;">19:28:47 UTC</span>

<span style="font-size: 90%;">Anything else about the release? _@airween_?</span>

**airween** <span style="color: grey; font-size: 90%;">19:29:12 UTC</span>

<span style="font-size: 90%;">not yet, but I'm sure I will have many questions. I will let you know :slightly_smiling_face:</span>

**dune73** <span style="color: grey; font-size: 90%;">19:30:06 UTC</span>

<span style="font-size: 90%;">Please do.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:30:47 UTC</span>

<span style="font-size: 90%;">We have not formally set up the program for the dev retreat. A few items have become clear, though.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:31:14 UTC</span>

<span style="font-size: 90%;">And we kind of said a sub-committee will decide on the program. But we should at least hear preferences.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:31:39 UTC</span>

<span style="font-size: 90%;">I think the performance thing is a must, because it's vital going forward.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:31:48 UTC</span>

<span style="font-size: 90%;">Roadmap is something we need to do.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:32:02 UTC</span>

<span style="font-size: 90%;">The rest: Many cool ideas.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:34:11 UTC</span>

<span style="font-size: 90%;">What do you all think?</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:34:25 UTC</span>

<span style="font-size: 90%;">Version 3.0.0 - 2016-11-10
CRS 3 will turn 7 years old during the retreat</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:34:32 UTC</span>

<span style="font-size: 90%;">Sorry, that's slightly OT.</span>

**airween** <span style="color: grey; font-size: 90%;">19:34:50 UTC</span>

<span style="font-size: 90%;">in the list of topics (dev-retreat 2023: [https://github.com/coreruleset/coreruleset/wiki/Dev-Retreat-2023-Topics](https://github.com/coreruleset/coreruleset/wiki/Dev-Retreat-2023-Topics)), there is an item:

"Project: Bringing the ModSecurity v3 + Nginx tests up to the same level as the ModSecurity v2 + Apache tests, so we can enable them for the automated GitHub testing."

if we want to bring up v3 to level of v2, does it mean this behavior will the same?</span>

↳ **airween** <span style="color: grey; font-size: 90%;">19:31:56 UTC</span>

<span style="font-size: 90%;">not in v3, it uses only a single string comparison:

[https://github.com/SpiderLabs/ModSecurity/blob/v3/master/src/rule_with_actions.cc#L447-L449](https://github.com/SpiderLabs/ModSecurity/blob/v3/master/src/rule_with_actions.cc#L447-L449)

but yes, it is in v2:

[https://github.com/SpiderLabs/ModSecurity/blob/v2/master/apache2/apache2_config.c#L2487](https://github.com/SpiderLabs/ModSecurity/blob/v2/master/apache2/apache2_config.c#L2487)</span>

↳ **xanadu** <span style="color: grey; font-size: 90%;">19:32:44 UTC</span>

<span style="font-size: 90%;">Good point. Then we must make sure to only use one whole string for our solution.</span>

↳ **xanadu** <span style="color: grey; font-size: 90%;">19:32:57 UTC</span>

<span style="font-size: 90%;">Whichever solution we implement.</span>

↳ **airween** <span style="color: grey; font-size: 90%;">19:34:50 UTC</span>

<span style="font-size: 90%;">in the list of topics (dev-retreat 2023: [https://github.com/coreruleset/coreruleset/wiki/Dev-Retreat-2023-Topics](https://github.com/coreruleset/coreruleset/wiki/Dev-Retreat-2023-Topics)), there is an item:

"Project: Bringing the ModSecurity v3 + Nginx tests up to the same level as the ModSecurity v2 + Apache tests, so we can enable them for the automated GitHub testing."

if we want to bring up v3 to level of v2, does it mean this behavior will the same?</span>

↳ **xanadu** <span style="color: grey; font-size: 90%;">19:35:51 UTC</span>

<span style="font-size: 90%;">So that v3 tests function and give meaningful results.</span>

↳ **xanadu** <span style="color: grey; font-size: 90%;">19:36:12 UTC</span>

<span style="font-size: 90%;">My understanding of v3 + Nginx is that it is simply not possible for it to behave the same as v2 + Apache</span>

↳ **xanadu** <span style="color: grey; font-size: 90%;">19:36:31 UTC</span>

<span style="font-size: 90%;">e.g. different reactions to different scenarios, Apache gives a 200 OK while Nginx gives a 400, etc.</span>

↳ **airween** <span style="color: grey; font-size: 90%;">19:37:32 UTC</span>

<span style="font-size: 90%;">yeah, that's true, but especially this behavior would be the same. Using regexes in exclusions helps to exclusions rule writers - but eats the CPU</span>

**airween** <span style="color: grey; font-size: 90%;">19:35:37 UTC</span>

<span style="font-size: 90%;">I know this does not affect the tests, but... you know what I mean :slightly_smiling_face:</span>

**dune73** <span style="color: grey; font-size: 90%;">19:37:16 UTC</span>

<span style="font-size: 90%;">I am not sure this ModSec3 project. Also feasibility.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:37:21 UTC</span>

<span style="font-size: 90%;">Who proposed this?</span>

↳ **airween** <span style="color: grey; font-size: 90%;">19:37:54 UTC</span>

<span style="font-size: 90%;">as I know _@fzipitria_</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:37:43 UTC</span>

<span style="font-size: 90%;">I wrote it down after it was proposed in an issue, I think</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:37:45 UTC</span>

<span style="font-size: 90%;">Or maybe a PR</span>

**airween** <span style="color: grey; font-size: 90%;">19:37:54 UTC</span>

<span style="font-size: 90%;">as I know _@fzipitria_</span>

↳ **airween** <span style="color: grey; font-size: 90%;">19:37:54 UTC</span>

<span style="font-size: 90%;">as I know _@fzipitria_</span>

**dune73** <span style="color: grey; font-size: 90%;">19:37:56 UTC</span>

<span style="font-size: 90%;">I see.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:38:35 UTC</span>

<span style="font-size: 90%;">But given the known implementation gaps in ModSec3, there are things where ModSec3 will always fail (until fixed). Correct?</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:39:21 UTC</span>

<span style="font-size: 90%;">That's my understanding. But currently we have 0 automated testing of ModSec 3 + Nginx. There surely must be a way to have at least some functional testing in place</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:39:44 UTC</span>

<span style="font-size: 90%;">I fully agree. I'd rather have a test suite with known failing tests than no tests</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:41:00 UTC</span>

<span style="font-size: 90%;">The bug we found where ruleRemoveTargetByTag simply didn't work in ModSec v3 was worrying: we should be able to have a chance to detect similar things</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:41:11 UTC</span>

<span style="font-size: 90%;">I think that's what started the discussion, IIRC. I think that was the issue</span>

**dune73** <span style="color: grey; font-size: 90%;">19:41:18 UTC</span>

<span style="font-size: 90%;">_@xanadu_ you mean we would run ModSec3 tests with a blueprint of accepted failures? When a new failure pops up, we know we have to act?</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:41:35 UTC</span>

<span style="font-size: 90%;">Yes. That's what we do with Apache already, no?</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:41:50 UTC</span>

<span style="font-size: 90%;">Some tests don't work on Apache and they are already set to "enabled: false"</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:41:59 UTC</span>

<span style="font-size: 90%;">Or disabled: true, I forget which</span>

**dune73** <span style="color: grey; font-size: 90%;">19:42:13 UTC</span>

<span style="font-size: 90%;">Don't look at me. I honestly do not know the details of testing anymore.</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:42:17 UTC</span>

<span style="font-size: 90%;">Expected test failures are a standard thing in software development. You'll also notice when a test suddenly passes but is expected to fail. A win either way IMO.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:42:29 UTC</span>

<span style="font-size: 90%;">Agreed.</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:42:40 UTC</span>

<span style="font-size: 90%;">But we shouldn't use "enabled:". That doesn't help :slightly_smiling_face:</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:42:40 UTC</span>

<span style="font-size: 90%;">Apache definitely reports "Skipped tests: X" where X is > 0 for the current testing setup</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:42:53 UTC</span>

<span style="font-size: 90%;">Maybe we could have disabled-nginx: true/false</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:42:56 UTC</span>

<span style="font-size: 90%;">Who knows.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:43:00 UTC</span>

<span style="font-size: 90%;">So we simply implement the same thing for ModSec3. And while we are at it for Coraza.</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:43:36 UTC</span>

<span style="font-size: 90%;">We'll need to discuss options. Maybe a expect-failure property that takes a list of engines</span>

**dune73** <span style="color: grey; font-size: 90%;">19:43:40 UTC</span>

<span style="font-size: 90%;">disabled: modsec3-nginx, coraza</span>

**franbuehler** <span style="color: grey; font-size: 90%;">19:43:49 UTC</span>

<span style="font-size: 90%;">When we are at Coraza, also this project would be cool:
</span>

↳ **maxleske** <span style="color: grey; font-size: 90%;">19:44:36 UTC</span>

<span style="font-size: 90%;">Already working on that with _@JC_</span>

↳ **franbuehler** <span style="color: grey; font-size: 90%;">19:44:56 UTC</span>

<span style="font-size: 90%;">Ah, ok.</span>

↳ **JC** <span style="color: grey; font-size: 90%;">19:45:01 UTC</span>

<span style="font-size: 90%;">Yes. I am on delay but will come back to action this week.</span>

↳ **franbuehler** <span style="color: grey; font-size: 90%;">19:45:22 UTC</span>

<span style="font-size: 90%;">:tada:
I'm looking forward to it!</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:43:50 UTC</span>

<span style="font-size: 90%;">That's a great idea</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:43:56 UTC</span>

<span style="font-size: 90%;">Not disabled please :slightly_smiling_face:</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:43:59 UTC</span>

<span style="font-size: 90%;">But yes</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:44:06 UTC</span>

<span style="font-size: 90%;">not-enabled: true/false</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:44:08 UTC</span>

<span style="font-size: 90%;">:stuck_out_tongue:</span>

**dune73** <span style="color: grey; font-size: 90%;">19:44:30 UTC</span>

<span style="font-size: 90%;">non-expected-success?</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:44:52 UTC</span>

<span style="font-size: 90%;">expected-failures:</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:45:00 UTC</span>

<span style="font-size: 90%;">Or something along those lines</span>

**dune73** <span style="color: grey; font-size: 90%;">19:45:07 UTC</span>

<span style="font-size: 90%;">Somehow this project sounds a lot better now after the discussion. Do we put this on the list for Budapest?</span>

**airween** <span style="color: grey; font-size: 90%;">19:45:14 UTC</span>

<span style="font-size: 90%;">a side note: skipping the regex checking in v3 is a particular behavior, right?

[https://github.com/SpiderLabs/ModSecurity/issues/2109#issuecomment-502780334](https://github.com/SpiderLabs/ModSecurity/issues/2109#issuecomment-502780334)</span>

**dune73** <span style="color: grey; font-size: 90%;">19:46:15 UTC</span>

<span style="font-size: 90%;">Lost track ...</span>

**dune73** <span style="color: grey; font-size: 90%;">19:47:46 UTC</span>

<span style="font-size: 90%;">Any other questions on proposed topics for the retreat or preferences?</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:50:04 UTC</span>

<span style="font-size: 90%;">We probably need to have a small discussion on the way we want to go forward with regex-assemble. I tend to add more (post) processing to files to improve automation but _@fzipitria_ doesn't seem to agree on everything.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:50:46 UTC</span>

<span style="font-size: 90%;">Yes, I think this is worthwhile.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:51:13 UTC</span>

<span style="font-size: 90%;">Also most of the team - namely me - have fallen behind there. Another session could bring us all on the same page again.</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:52:11 UTC</span>

<span style="font-size: 90%;">There are still some rules left for all of you to try your hand :wink:</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:52:31 UTC</span>

<span style="font-size: 90%;">Also for the new Unix RCE rules. A recap of those would be very welcome.</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:52:38 UTC</span>

<span style="font-size: 90%;">How they fit together etc.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:53:43 UTC</span>

<span style="font-size: 90%;">Good, if there is nothing else on the program for the dev-retreat, I think we can bring this to an end for tonight.</span>

**jit** <span style="color: grey; font-size: 90%;">19:54:12 UTC</span>

<span style="font-size: 90%;">Goodnight everyone :slightly_smiling_face:</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:54:18 UTC</span>

<span style="font-size: 90%;">So, for the sake of the chat archive and those who can't make it to Budapest, no usual CRS Slack meeting on 6 November?</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:55:07 UTC</span>

<span style="font-size: 90%;">I suppose not :slightly_smiling_face:</span>

**maxleske** <span style="color: grey; font-size: 90%;">19:55:07 UTC</span>

<span style="font-size: 90%;">bb</span>

**dune73** <span style="color: grey; font-size: 90%;">19:55:13 UTC</span>

<span style="font-size: 90%;">Good thinking.</span>

**dune73** <span style="color: grey; font-size: 90%;">19:55:20 UTC</span>

<span style="font-size: 90%;">No, we'll skip that I guess.</span>

**airween** <span style="color: grey; font-size: 90%;">19:55:23 UTC</span>

<span style="font-size: 90%;">or we can take some pictures and post them here :slightly_smiling_face:</span>

**franbuehler** <span style="color: grey; font-size: 90%;">19:56:05 UTC</span>

<span style="font-size: 90%;">I'll add this info to the meeting minutes. Good point.

Good night :wave:</span>

**airween** <span style="color: grey; font-size: 90%;">19:56:21 UTC</span>

<span style="font-size: 90%;">good night!</span>

**xanadu** <span style="color: grey; font-size: 90%;">19:56:24 UTC</span>

<span style="font-size: 90%;">Night!</span>

**dune73** <span style="color: grey; font-size: 90%;">19:56:33 UTC</span>

<span style="font-size: 90%;">Good night and thank you all for attending.</span>

**emphazer** <span style="color: grey; font-size: 90%;">19:57:37 UTC</span>

<span style="font-size: 90%;">Good night</span>

**franbuehler** <span style="color: grey; font-size: 90%;">19:58:31 UTC</span>

<span style="font-size: 90%;">[https://github.com/coreruleset/coreruleset/issues/3280#issuecomment-1765110124](https://github.com/coreruleset/coreruleset/issues/3280#issuecomment-1765110124)</span>

**dune73** <span style="color: grey; font-size: 90%;">21:26:07 UTC</span>

<span style="font-size: 90%;">Alternative to MaxMind in open MaxMind format.</span>

**dune73** <span style="color: grey; font-size: 90%;">21:27:50 UTC</span>

<span style="font-size: 90%;">[https://cra.circl.lu/opendata/geo-open/mmdb-country-asn/?C=M;O=A](https://cra.circl.lu/opendata/geo-open/mmdb-country-asn/?C=M;O=A)</span>

**dune73** <span style="color: grey; font-size: 90%;">21:28:06 UTC</span>

<span style="font-size: 90%;">-> [https://github.com/adulau/mmdb-server](https://github.com/adulau/mmdb-server)</span>

